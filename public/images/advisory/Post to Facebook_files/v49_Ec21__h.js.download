if (self.CavalryLogger) { CavalryLogger.start_js(["KJ+Xs"]); }

__d("QE",["Banzai","Cache"],(function(a,b,c,d,e,f){__p&&__p();var g="qe_log_exposure",h=60,i=new(b("Cache"))();a={logExposure:function(a,c){var d=c?a+"|"+c:a;if(i.has(d))return;var e={signal:!0};a={name:a,id:null};c&&(a.id=c);b("Banzai").post(g,a,e);i.set(d,!0,1,h)}};e.exports=a}),null);
__d("CommercialBreakExposureLogger",["CommercialBreakMobileEvent","CommercialBreakNoAdReason","DateConsts","InstreamVideoAdType","MarauderLogger","QE","SubscriptionsHandler"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c,d,e,f,g){"use strict";this.$1=a,this.$2=c,this.$3=d,this.$4=e,this.$5=f,this.$6=g,this.$7=new(b("SubscriptionsHandler"))(),d&&e&&this.$7.addSubscriptions(this.$1.addListener("updateStatus",this.$8.bind(this)))}a.prototype.$8=function(){"use strict";__p&&__p();var a=this.$1.getCurrentTimePosition()*b("DateConsts").MS_PER_SEC;for(var c=0;c<this.$3.length;c++){var d=this.$3[c].getTimeOffsetInMs()||0;if(a<=d&&a+this.$6>d){this.$7.release();b("QE").logExposure(this.$4);if(!this.$5){d={ad_break_index:this.$3[c].getIndex(),commercial_break_no_ad_reason:b("CommercialBreakNoAdReason").CONTROL_GROUP,host_video_id:this.$1.getVideoID(),instream_video_ad_type:this.$2?b("InstreamVideoAdType").VOD:b("InstreamVideoAdType").NONLIVE};b("MarauderLogger").log(b("CommercialBreakMobileEvent").COMMERCIAL_BREAK_START_SHOW_NOTHING,"commercial_break",d)}return}}};e.exports=a}),null);
__d("CommercialBreakHostStoryController",["csx","cx","Arbiter","CommercialBreakState","CommercialBreakUtil","CSS","DOM","DOMQuery","StoryComponentVideoPlayerControllerRegistry","VideoPlayerLoggerSource","ge"],(function(a,b,c,d,e,f,g,h){__p&&__p();function a(a,c,d,e,f){"use strict";__p&&__p();this.$1=null;this.$6=null;this.$7=null;this.$8=null;this.$9=null;this.$2=d;this.$18=f;this.$4=a;this.$3=c;this.$12=null;e&&(this.$17=e.toString());d=b("DOMQuery").scry(c,".uiLikePageButton");d.length!==0&&(this.$1=d[0]);f=b("DOMQuery").scry(c,"._5pbx");f.length!==0&&(this.$6=f[0]);a=b("DOMQuery").scry(c,"._2ezg");a.length!=0&&(this.$7=a[0]);e=b("DOMQuery").scry(c,"._5pcm");e.length!=0&&(this.$8=e[0]);d=b("DOMQuery").scry(c,"._5pbz");if(d.length!=0){f=d[0];this.$9=b("DOMQuery").scry(f,"._1dwg")}a=b("DOMQuery").scry(c,"._nqx");a.length>0&&(this.$10=a[0]);b("StoryComponentVideoPlayerControllerRegistry").registerHostStoryController(this,this.$17,this.$19.bind(this))}a.prototype.getContainerElement=function(){"use strict";return this.$3};a.prototype.getInstanceID=function(){"use strict";return this.$2};a.prototype.$19=function(a){"use strict";this.$13=a,this.$5=this.$13.getRootNode(),b("Arbiter").subscribe("VideoChannelView/closed",this.$20.bind(this)),this.$13.addListener("commercialBreak/hideUFI",this.$21.bind(this)),this.$13.addListener("commercialBreak/showUFI",function(){this.$11&&b("CommercialBreakUtil").removeContextCard(this.$11)}.bind(this)),this.$13.addListener("TahoeController/exitTahoe",this.$22.bind(this)),this.$16=a.addListener("optionsChange",function(){return this.$23()}.bind(this)),this.$23()};a.prototype.$23=function(){"use strict";this.$15=this.$13.getOption("VideoWithCommercialBreak","controller"),this.$14=this.$13.getOption("VideoWithInstreamVideo","controller"),this.$15&&(this.$16.remove(),this.$15.setStoryIdentifier(this.$18),this.$15.addListener("commercialBreak/stateChange",function(a){return this.$24(a.state)}.bind(this)))};a.prototype.$24=function(a){"use strict";a===b("CommercialBreakState").PLAY_AD?this.$25():this.$26()};a.prototype.$20=function(){"use strict";this.$27()};a.prototype.$22=function(){"use strict";this.$27()};a.prototype.$27=function(){"use strict";this.$15&&(this.$15.getIsCommercialBreakOngoing()&&this.$21())};a.prototype.$21=function(){"use strict";__p&&__p();if(!this.$28())return;var a=this.$5&&this.$5.parentNode;if(a){a=b("DOM").scry(a,"._16bp");if(a.length!=0)return}this.$11=b("DOM").create("div",{className:"_16bp"});b("DOM").insertAfter(this.$5,this.$11);b("CommercialBreakUtil").renderContextCard(this.$13,this.$11)};a.prototype.$28=function(){"use strict";return this.$29()||this.$30()};a.prototype.$30=function(){"use strict";return this.$13?this.$13.getSource()===b("VideoPlayerLoggerSource").PERMALINK:!1};a.prototype.$29=function(){"use strict";return this.$13?this.$13.getSource()===b("VideoPlayerLoggerSource").INLINE:!1};a.prototype.$25=function(){"use strict";__p&&__p();this.$1&&b("CSS").addClass(this.$1,"_3fcl");this.$4&&b("CSS").addClass(this.$4,"_3fcl");this.$6&&b("CSS").addClass(this.$6,"_3fcl");this.$7&&b("CSS").addClass(this.$7,"_3fcl");this.$8&&b("CSS").addClass(this.$8,"_3fcl");this.$9&&this.$9.map(function(a){b("CSS").addClass(a,"_3fcl")});this.$10&&b("CSS").addClass(this.$10,"_gtd");var a=b("StoryComponentVideoPlayerControllerRegistry").findPopoverAsyncMenuForVideoPlayerController(this.$13);if(a){a=a.getOptionsButtonID();this.$12=b("ge")(a)}this.$12&&b("CSS").addClass(this.$12,"_3fcl")};a.prototype.$26=function(){"use strict";this.$1&&b("CSS").removeClass(this.$1,"_3fcl"),this.$4&&b("CSS").removeClass(this.$4,"_3fcl"),this.$6&&b("CSS").removeClass(this.$6,"_3fcl"),this.$7&&b("CSS").removeClass(this.$7,"_3fcl"),this.$8&&b("CSS").removeClass(this.$8,"_3fcl"),this.$9&&this.$9.map(function(a){b("CSS").removeClass(a,"_3fcl")}),this.$10&&b("CSS").removeClass(this.$10,"_gtd"),this.$12&&b("CSS").removeClass(this.$12,"_3fcl"),this.$12=null};e.exports=a}),null);